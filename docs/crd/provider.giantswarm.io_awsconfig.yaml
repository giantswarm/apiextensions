apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: awsconfigs.provider.giantswarm.io
spec:
  conversion:
    strategy: None
  group: provider.giantswarm.io
  names:
    kind: AWSConfig
    listKind: AWSConfigList
    plural: awsconfigs
    singular: awsconfig
  preserveUnknownFields: true
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: |
          Together with AWSClusterConfig, defines a tenant cluster in a
          Giant Swarm installation in releases before v10.0.1.
          Reconciled by aws-operator.
        properties:
          spec:
            properties:
              aws:
                description: AWS-specific configuration.
                properties:
                  api:
                    description: |
                      Configures the tenant cluster Kubernetes API.
                      Deprecated since aws-operator v12.
                    properties:
                      elb:
                        description: |
                          Configures the Elastic Load Balancer for the
                          tenant cluster Kubernetes API.
                        properties:
                          idleTimeoutSeconds:
                            description: |
                              Seconds to keep an idle connection open.
                            type: int
                        type: object
                      hostedZones:
                        description: TODO
                        type: string
                    type: object
                  availabilityZones:
                    description: |
                      Number of availability zones to use for the tenant cluster's worker nodes.
                      There are limitations on availability zone settings due to binary IP range
                      splitting and provider specific region capabilities. When for instance choosing
                      3 availability zones, the configured IP range will be split into 4 ranges and
                      thus one of it will not be able to be utilized. Such limitations have to be considered
                      when designing the network topology and configuring tenant cluster HA via availability
                      zones.

                      The selection and usage of the actual availability zones for the created
                      tenant cluster is randomized. In case there are 4 availability zones
                      provided in the used region and the user selects 2 availability zones, the
                      actually used availability zones in which tenant cluster workload is put
                      into will tend to be different across tenant cluster creations. This is
                      done in order to provide more HA during single availability zone failures.
                      In case a specific availability zone fails, not all tenant clusters will be
                      affected due to the described selection process.
                    type: int
                  az:
                    description: |
                      Deprecated way to define the availability zone to use
                      by the tenant cluster.
                    type: string
                  credentialSecret:
                    description: |
                      Defines which Secret resource to use in orde to obtain the IAM role to assume
                      for managing resources for this tenant cluster on AWS. This allows to
                      run different tenant clusters of the same installation in different
                      AWS accounts.
                    properties:
                      name:
                        description: Name of the Secret resource.
                        type: string
                      namespace:
                        description: Namespace of the Secret resource.
                        type: string
                    type: object
                  etcd:
                    description: |
                      Configures the Etcd cluster storing the tenant cluster's data.
                      Deprecated since aws-operator v12.
                    properties:
                      elb:
                        description: |
                          Elastic Load Balancer configuration.
                        properties:
                          idleTimeoutSeconds:
                            description: |
                              Seconds to keep an idle connection open.
                            type: int
                        type: object
                    type: object
                  hostedZones:
                    description: |
                      HostedZones is AWS hosted zones names in the host cluster account.
                      For each zone there will be "CLUSTER_ID.k8s" NS record created in
                      the host cluster account. Then for each created NS record there will
                      be a zone created in the guest account. After that component-specific
                      records under those zones:

                      - api.CLUSTER_ID.k8s.{{ .Spec.AWS.HostedZones.API.Name }}
                      - etcd.CLUSTER_ID.k8s.{{ .Spec.AWS.HostedZones.Etcd.Name }}
                      - ingress.CLUSTER_ID.k8s.{{ .Spec.AWS.HostedZones.Ingress.Name }}
                      - *.CLUSTER_ID.k8s.{{ .Spec.AWS.HostedZones.Ingress.Name }}
                    properties:
                      api:
                        description: |
                          DNS zone configuration for the Kubernetes API.
                        properties:
                          name:
                            description: Zone name.
                            type: string
                        type: object
                      etcd:
                        description: |
                          DNS zone configuration for Etcd.
                        properties:
                          name:
                            description: Zone name.
                            type: string
                        type: object
                      ingress:
                        description: |
                          DNS zone configuration for Ingress.
                        properties:
                          name:
                            description: Zone name.
                            type: string
                        type: object
                    type: object
                  ingress:
                    description: |
                      Ingress configuration.
                      Deprecated since aws-operator v12.
                    properties:
                      elb:
                        description: |
                          Configuration of the Elastic Load Balancer for Ingress.
                        properties:
                          idleTimeoutSeconds:
                            description: |
                              Seconds to keep an idle connection open.
                            type: int
                        type: object
                    type: object
                  masters:
                    description: |
                      Configuration of the master nodes.
                    items:
                      description: |
                        Configuration for each individual master node.
                      properties:
                        imageID:
                          description: |
                            Amazon Machine Image (AMI) identifier to use as a base for
                            the EC2 instance of this master node.
                          type: string
                        instanceType:
                          description: |
                            Name of the AWS EC2 instance type to use for this master node.
                          type: string
                      type: object
                    type: array
                  region:
                    description: |
                      Name of the AWS region the tenant cluster is running in.
                    type: string
                  vpc:
                    description: |
                      Configuration of the Virtual Private Cloud (VPC) to use for
                      the tenant cluster.
                    properties:
                      cidr:
                        description: TODO
                        type: string
                      peerId:
                        description: TODO
                        type: string
                      privateSubnetCidr:
                        description: TODO
                        type: string
                      publicSubnetCidr:
                        description: TODO
                        type: string
                      routeTableNames:
                        description: TODO
                        items:
                          type: string
                        type: array
                    type: object
                  workers:
                    description: |
                      Configuration of worker nodes.
                    items:
                      description: |
                        Configuration of an individual worker node. Each worker node
                        is represented by one item.
                      properties:
                        dockerVolumeSizeGB:
                          description: |
                            Size of the worker docker volume in gigabytes.
                          type: int
                        imageID:
                          description: |
                            Amazon Machine Image (AMI) identifier to use as a base for
                            the EC2 instance of this master node.
                          type: string
                        instanceType:
                          description: |
                            Name of the AWS EC2 instance type to use for this master node.
                          type: string
                      type: object
                    type: array
                type: object
              cluster:
                description: |
                  Cluster configuration parts that are not meant to be specific to AWS
                  and thus might look similar or identical on other providers.
                properties:
                  calico:
                    description: |
                      Configuration for the Project Calico Container Network Interface
                      (CNI).
                    properties:
                      cidr:
                        description: |
                          Subnet size, expresses as the count of leading 1 bits in the subnet
                          mask of this subnet. In other words, in CIDR notation, the integer
                          behind the slash.
                        type: int
                      mtu:
                        description: |
                          Size of the maximum transition unit (MTU) in bytes.
                        type: int
                      subnet:
                        description: |
                          Subnet IPv4 address. In other words, in CIDR notation, the
                          part before the slash.
                        type: string
                    type: object
                  customer:
                    description: |
                      Information on the Giant Swarm customer owning the
                      tenant cluster.
                    properties:
                      id:
                        description: |
                          Unique customer identifier.
                        type: string
                    type: object
                  docker:
                    description: |
                      Configuration for Docker.
                    properties:
                      daemon:
                        description: |
                          Configuration for the Docker daemon.
                        properties:
                          cidr:
                            description: |
                              CIDR notation for the subnet to use for Docker
                              networking.
                            type: string
                        type: object
                    type: object
                  etcd:
                    description: |
                      Configuration for Etcd.
                    properties:
                      altNames:
                        description: TODO
                        type: string
                      domain:
                        description: |
                          Domain name to use for Etcd.
                        type: string
                      port:
                        description: |
                          Port number Etcd is listening on.
                        type: int
                      prefix:
                        description: |
                          Prefix to prepend to all Etcd keys.
                        type: string
                    type: object
                  id:
                    description: |
                      Cluster identifier, unique within the installation.
                      The identifier is expected to be exactly 5 characters
                      long, with characters from the range a-z and 0-9.
                    type: string
                  kubernetes:
                    description: |
                      Various Kubernetes configuration items.
                    properties:
                      api:
                        description: |
                          Configuration for the Kubernetes api-server.
                        properties:
                          clusterIPRange:
                            description: |
                              IP range to use for ClusterIP, in CIDR notation.
                            type: string
                          domain:
                            description: |
                              Fully qualified host name of the API server.
                            type: string
                          securePort:
                            description: |
                              Port number for HTTPS access to the API.
                            type: int
                        type: object
                      cloudProvider:
                        description: Name of the cloud provider. Must be 'aws'.
                        type: string
                      dns:
                        description: DNS configuration.
                        properties:
                          ip:
                            description: TODO
                            type: string
                        type: object
                      domain:
                        description: Domain name to use internally within the cluster.
                        type: string
                      ingressController:
                        description: |
                          Configuration of the Ingress Controller.
                        properties:
                          docker:
                            description: Ingress Controller Docker configuration.
                            properties:
                              image:
                                description: Docker image for the Ingress Controller.
                                type: string
                            type: object
                          domain:
                            description: |
                              Fully qualified host name the Ingress load balancer is listening on.
                            type: string
                          insecurePort:
                            description: TODO
                            type: int
                          securePort:
                            description: TODO
                            type: int
                          wildcardDomain:
                            description: TODO
                            type: string
                        type: object
                      kubelet:
                        description: TODO
                        properties:
                          altNames:
                            description: |
                              Alternative internal DNS names to access the API server.
                            type: string
                          domain:
                            description: |
                              DNS suffix to use for worker nodes.
                            type: string
                          labels:
                            description: TODO
                            type: string
                          port:
                            description: TODO
                            type: int
                        type: object
                      networkSetup:
                        description: TODO
                        properties:
                          docker:
                            description: TODO
                            properties:
                              image:
                                description: |
                                  Docker image for setting up the network environment.
                                type: string
                            type: object
                          kubeProxy:
                            description: |
                              kubeProxy configuration.
                            properties:
                              conntrackMaxPerCore:
                                description: TODO
                                type: int
                            type: object
                        type: object
                      ssh:
                        description: |
                          SSH access configuration applied to master and worker nodes
                          of the tenant cluster.
                        properties:
                          userList:
                            description: |
                              List of SSH users with access to the nodes.
                            items:
                              description: |
                                An individual SSH user with access.
                              properties:
                                name:
                                  description: |
                                    Posix username to assign to the user logging in with
                                    the given SSH public key.
                                  type: string
                                publicKey:
                                  description: |
                                    SSH public key in Base64 encoding.
                                  type: string
                              type: object
                            type: array
                        type: object
                    type: object
                  masters:
                    description: |
                      Configuration of master nodes.
                    items:
                      description: TODO
                      properties:
                        id:
                          description: TODO
                          type: string
                      type: object
                    type: array
                  scaling:
                    description: |
                      Configuration of worker node scaling. The cluster-autoscaler
                      sets the actual number of worker nodes in the cluster based
                      on the 'min' and 'max' value.
                    properties:
                      max:
                        description: |
                          Maximum amount of worker nodes. Upper limit of the
                          autoscaling range.
                        type: int
                      min:
                        description: |
                          Minimum amount of worker nodes. Lower limit of the
                          autoscaling range.
                        type: int
                    type: object
                  version:
                    description: TODO
                    type: string
                  workers:
                    description: |
                      List of worker nodes with configuration.
                    items:
                      description: |
                        Configuration of an individual worker node.
                      properties:
                        id:
                          description: |
                            Unique identifier of the worker node.
                          type: string
                      type: object
                    type: array
                type: object
              versionBundle:
                description: TODO
                properties:
                  version:
                    description: TODO
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
